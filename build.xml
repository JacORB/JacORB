<?xml version="1.0"?>

<project name="main" default="all" basedir=".">

  <!-- ==================================================== -->
  <!--            JacORB build file                         -->
  <!-- $Id$ -->
  <!-- ==================================================== -->

   <target name="init" depends="javatest">
	<property name="Name" value="main"/>
	<property name="name" value="main"/>
	<property name="dirs.base" value="${basedir}"/>
	<property name="classdir" value="${dirs.base}/classes"/>
	<property name="classpath" 
                  value="${java.class.path}:${dirs.base}/classes"/>
	<property name="src" value="${dirs.base}/src"/>
	<property name="lib" value="${dirs.base}/lib"/>
	<property name="include" value="${dirs.base}/idl"/>
	<property name="idlflags" 
                  value="-ir -I${basedir}/idl/omg -p org.omg -d ${src}/generated"/>
	<mkdir dir="${classdir}"/>
	<mkdir dir="${lib}"/>
	<available classname="java.util.Collection" property="java2.present"/>
	<filter token="path" value="basedir"/>
   </target>

   <!-- check for Java 2 -->
   <target name="javatest">
	<available classname="java.lang.ref.WeakReference"
	property="java2" />	
   </target>

   <!-- top-level targets  -->

   <target name="all" 
           depends="init,compiler,corba,names,security,events,transactions,concurrency,collections,trading,jacorb,libs" />

   <target name="services" 
           depends="events,trading,collections,transactions,concurrency"
   />

   <!--               -->
   <!-- IDL compiler  -->
   <!--               -->

   <target name="compiler" depends="init,java_cup,idlsrc, idllib, idlcmd" />

   <target name="idlcmd" depends="idlcmd1,idlcmd2"/>

   <!-- generate idl.bat for JDK 1.1 -->

   <target name="idlcmd1" unless="java2">
        <delete file="bin/idl" />
        <delete file="bin/idl.bat" />
        <copy file="bin/idltemplate" tofile="bin/idl" />   
        <copy file="bin/idltemplate.bat" tofile="bin/idl.bat" />
        <replace file="bin/idl" token="@@@" 
                 value="${java.home}\lib\classes.zip:${basedir}"/>
        <replace file="bin/idl.bat" token="@@@" 
                 value="${java.home}\lib\classes.zip;${basedir}"/>
        <chmod file="bin/idl" perm="ugo+rx"/>
   </target>  

   <!-- generate idl.bat for JDK 1.2 or 1.3 -->

   <target name="idlcmd2" if="java2">
        <delete file="bin/idl" />
        <delete file="bin/idl.bat" />
        <copy file="bin/idltemplate" tofile="bin/idl" />   
        <copy file="bin/idltemplate.bat" tofile="bin/idl.bat" />
        <replace file="bin/idl" token="@@@" value="${basedir}"/>
        <replace file="bin/idl.bat" token="@@@" value="${basedir}"/>
        <chmod file="bin/idl" perm="ugo+rx"/>
   </target> 

   <!-- package idl.jar -->

   <target name="idllib" depends="java_cup,idlsrc" >
        <jar jarfile="${lib}/idl.jar" 
             basedir="${classdir}"
	         includes="org/jacorb/idl/**,java_cup/**"
	     />
   </target>  

    <target name="idlsrc">
	<ant antfile="${src}/org/jacorb/idl/build.xml" dir="${basedir}" />
    </target>

    <target name="java_cup">
	<ant antfile="${src}/java_cup/build.xml" dir="${basedir}"/>
   </target>


   <!-- ==================================================== -->
   <!--                       CORBA                          -->
   <!-- ==================================================== -->

   <target name="corba" 
           depends="orb,dynany,portableserver,iop,iiop,giop,conf,interceptor,csubone, csubtwo, csubthree"/>

    
   <!-- compilation split into three subtasks because some Java -->
   <!-- compilers bail out if too many classes are compiled at once -->

   <target name="csubone" >
	<javac srcdir="${src}/generated"
               destdir="${classdir}"
               includes="org/omg/CORBA/**,org/omg/DynamicAny/**"
        />
   </target>

   <target name="csubtwo" >
	<javac srcdir="${src}/generated"
               destdir="${classdir}"
               includes="org/omg/IOP/**,org/omg/GIOP/**,org/omg/IIOP/**,org/omg/CONV_FRAME/**,org/omg/Dynamic/**"
        />
   </target>

   <target name="csubthree" >
	<javac srcdir="${src}/generated"
               destdir="${classdir}"
               includes="org/omg/Messaging/**,org/omg/IOP_N/**,org/omg/PortableInterceptor/**"
        />
   </target>

   <!-- standard classes defined by the IDL language mapping  -->
   <!-- are copied from a directory containing OMG-provided files -->

   <target name="orb" depends="init"> 
        <java classname="org.jacorb.idl.parser" fork="yes" classpath="${classpath}">
	      <arg line="${idlflags} ${include}/omg/_orb.idl"/>
         </java>

        <delete file="${src}/generated/org/omg/CORBA/Policy.java"/>
	<delete file="${src}/generated/org/omg/CORBA/TypeCode.java"/>
	<delete file="${src}/generated/org/omg/CORBA/TypeCodeHelper.java"/>
	<delete file="${src}/generated/org/omg/CORBA/TypeCodeHolder.java"/>
	<delete file="${src}/generated/org/omg/CORBA/TypeCodePOA.java"/>
    	<delete file="${src}/generated/org/omg/CORBA/TypeCodePOATie.java"/>
        <delete file="${src}/generated/org/omg/CORBA/_TypeCodeStub.java"/>
        <delete file="${src}/generated/org/omg/CORBA/PolicyOperations.java"/>
        <mkdir dir="${src}/generated/org"/> 

        <copy todir='${src}/generated'>
             <fileset dir="${src}/omg-99-10-27">
		        <include name="**/*.java"/>
             </fileset>
        </copy>

         <delete file="${src}/generated/org/omg/CORBA/ORB.java"/>
<!-- 	<delete file="${src}/generated/org/omg/CORBA/BadKind.java"/> -->
<!-- 	<delete file="${src}/generated/org/omg/CORBA/BadKindHelper.java"/> -->
<!--         <delete file="${src}/generated/org/omg/CORBA/BoundsHelper.java"/> -->
<!-- 	<delete file="${src}/generated/org/omg/CORBA/Bounds.java"/> -->
<!--        <delete
	file="${src}/generated/org/omg/CORBA/WrongTransaction.java"/> -->

	<copy file="${src}/java_mapping/CORBA/ORB.java"
              tofile="${src}/generated/org/omg/CORBA/ORB.java"
	/>	
	<copy file="${src}/java_mapping/CORBA/ORBPackage/InvalidNameHelper.java"
              tofile="${src}/generated/org/omg/CORBA/ORBPackage/InvalidNameHelper.java"
	/>	
	<copy file="${src}/java_mapping/CORBA/FixedHolder.java"
              tofile="${src}/generated/org/omg/CORBA/FixedHolder.java"
	/>
   </target>

   <!-- the remaining OMG classes are generated by compiling  -->
   <!-- their original IDL definitions -->

   <target name="iop" depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/IOP.idl"/>
	</java>
   </target>

   <target name="iiop"  depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/IIOP.idl"/>
	</java>
   </target>

   <target name="giop" depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/GIOP.idl"/>
	</java>
   </target>

   <target name="conf">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CONV_FRAME.idl"/>
	</java>
   </target>
   
   <target name="interceptor" depends="time">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/Dynamic.idl"/>
	</java>

	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/Messaging.idl"/>
	</java>

	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/IOP_N.idl"/>
	</java>

	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/PortableInterceptor.idl"/>
	</java>
   </target>

   <target name="portableserver" depends="init,copymapping">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
           <arg line="${idlflags} -noskel ${include}/omg/PortableServer.idl"/>
        </java>

	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
           <arg line="${idlflags} ${include}/omg/BiDirPolicy.idl"/>
        </java>

	<javac srcdir="${src}/generated"
               destdir="${classdir}"
               includes="org/omg/PortableServer/**,org/omg/BiDirPolicy/**"
               classpath="${classpath}"
        />   
   </target>

   <!-- a few necessary classes not provided by the   -->
   <!-- language mapping, we provide these ourselves  -->

   <target name="copymapping">
	   <copy file="${src}/java_mapping/PortableServer/_ServantActivatorStub.java"
	         tofile="${src}/generated/org/omg/PortableServer/_ServantActivatorStub.java"
	   />
	   <delete file="${src}/generated/org/omg/PortableServer/Servant.java"/>
	   <copy file="${src}/java_mapping/PortableServer/Servant.java"
	         tofile="${src}/generated/org/omg/PortableServer/Servant.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/ServantActivatorPOA.java"
	         tofile="${src}/generated/org/omg/PortableServer/ServantActivatorPOA.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/ServantActivatorPOATie.java"
	         tofile="${src}/generated/org/omg/PortableServer/ServantActivatorPOATie.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/ServantLocatorPOA.java"
	         tofile="${src}/generated/org/omg/PortableServer/ServantLocatorPOA.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/ServantLocatorPOATie.java"
	         tofile="${src}/generated/org/omg/PortableServer/ServantLocatorPOATie.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/ServantLocatorHelper.java"
	         tofile="${src}/generated/org/omg/PortableServer/ServantLocatorHelper.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/_ServantLocatorStub.java"
	         tofile="${src}/generated/org/omg/PortableServer/_ServantLocatorStub.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/AdapterActivatorPOA.java"
	         tofile="${src}/generated/org/omg/PortableServer/AdapterActivatorPOA.java"
	   />
	   <copy file="${src}/java_mapping/PortableServer/AdapterActivatorPOATie.java"
	         tofile="${src}/generated/org/omg/PortableServer/AdapterActivatorPOATie.java"
	   />
   </target>

   <target name="dynany">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/DynamicAny.idl"/>
	</java>

	<javac srcdir="${src}/generated"
               destdir="${classdir}"
               includes="org/omg/DynamicAny/**"
        />
   </target>

   <!-- ==================================================== -->
   <!--                   OMG Object services                -->
   <!-- ==================================================== -->

   <!-- name service  -->

   <target name="names" depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} -ir  ${include}/omg/CosNaming.idl"/>
	</java>

	<javac srcdir="${src}/generated/org/omg/CosNaming"
               destdir="${classdir}" />
   </target>

   <!--               -->
   <!-- event service  -->
   <!--               -->

   <target name="events" depends="init,Comm,Admin">
	<javac srcdir="${src}/generated"
               destdir="${classdir}"
	       includes="org/omg/CosEventChannelAdmin/**,org/omg/CosEventComm/**"
         />
   </target>

   <target name="Admin">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} -ir ${include}/omg/CosEventChannelAdmin.idl"/>
	</java>
   </target>

   <target name="Comm">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} -ir  ${include}/omg/CosEventComm.idl"/>
	</java>
   </target>

   <!--                      -->
   <!-- transaction service  -->
   <!--                      -->

   <target name="transactions" depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags}  ${include}/omg/CosTransactions.idl"/>
	</java>
	<javac srcdir="${src}/generated/org/omg/CosTransactions"
               destdir="${classdir}" 
        />
   </target>

   <!--                      -->
   <!-- collection service  -->
   <!--                      -->


   <target name="collections"  depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags}   ${include}/omg/CosCollection.idl"/>
	</java>

	<javac srcdir="${src}"
               destdir="${classdir}" 
	       includes="generated/org/omg/CosCollection/Istring*.java,generated/org/omg/CosCollection/NVPair*.java,generated/org/omg/CosCollection/ParameterList*.java,generated/org/omg/CosCollection/AnySequence*.java,generated/org/omg/CosCollection/_Operations*.java,generated/org/omg/CosCollection/Operations*.java,generated/org/omg/CosCollection/*Invalid*.java,generated/org/omg/CosCollection/*Reason*.java,generated/org/omg/CosCollection/*EmptyCollection*.java,generated/org/omg/CosCollection/*Com*.java,generated/org/omg/CosCollection/Iterator*.java,generated/org/omg/CosCollection/_Iterator*.java, generated/org/omg/CosCollection/Collection*.java, generated/org/omg/CosCollection/_Collection*.java"
	       />
	<javac srcdir="${src}"
               destdir="${classdir}" 
	       includes="generated/org/omg/CosCollection/*BoundStyle*.java,generated/org/omg/CosCollection/*Iterator*.java,generated/org/omg/CosCollection/_*Iterator*.java"
               excludes="generated/org/omg/CosCollection/Iterator*.java,generated/org/omg/CosCollection/_Iterator*.java"
	       />
	<javac srcdir="${src}"
          destdir="${classdir}" 
	      includes="generated/org/omg/CosCollection/*Operations*.java, generated/org/omg/CosCollection/Collection*.java, generated/org/omg/CosCollection/*Heap*.java, generated/org/omg/CosCollection/*RestrictedAccessCollection*.java, generated/org/omg/CosCollection/*Deque*.java, generated/org/omg/CosCollection/*Queue*.java,generated/org/omg/CosCollection/*Stack*.java,generated/org/omg/CosCollection/*PriorityQueue*.java,generated/org/omg/CosCollection/*CollectionFactor*.java, generated/org/omg/CosCollection/*OrderedCollection*.java, generated/org/omg/CosCollection/*SequentialCollection*.java, generated/org/omg/CosCollection/*CSequence*.java"
		  excludes="generated/org/omg/CosCollection/*Relation*.java, generated/org/omg/CosCollection/*Bag*.java, generated/org/omg/CosCollection/*EqualitySequen*.java, generated/org/omg/CosCollection/*Map*.java,generated/org/omg/CosCollection/*Set*.java, generated/org/omg/CosCollection/*Key*.java"
	       />
	<javac srcdir="${src}"
          destdir="${classdir}" 
	      includes="generated/org/omg/CosCollection/*EqualitySequence*.java,generated/org/omg/CosCollection/*Collection*.java"
		  excludes="generated/org/omg/CosCollection/*Bag*.java, generated/org/omg/CosCollection/*Factor*.java, generated/org/omg/CosCollection/*Key*.java, generated/org/omg/CosCollection/*Set*.java"
	       />
    <javac srcdir="${src}"
          destdir="${classdir}" 
	      includes="generated/org/omg/CosCollection/*Bag*.java, generated/org/omg/CosCollection/*Map*.java,generated/org/omg/CosCollection/*Set*.java, generated/org/omg/CosCollection/*Key*.java"
		  excludes="generated/org/omg/CosCollection/*Factor*.java,generated/org/omg/CosCollection/*Relation*.java"
	       />
    <javac srcdir="${src}"
          destdir="${classdir}" 
	      includes="generated/org/omg/CosCollection/*Factor*.java,generated/org/omg/CosCollection/*Relation*.java"
	       />
   </target>

   <!--                      -->
   <!-- concurrency service  -->
   <!--                      -->

   <target name="concurrency">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags}   ${include}/omg/CosConcurrencyControl.idl"/>
	</java>
	<javac srcdir="${src}/generated/org/omg/CosConcurrencyControl"
               destdir="${classdir}" 
        />
   </target>

   <!--                      -->
   <!--     trading service  -->
   <!--                      -->

   <target name="trading" depends="basic,repository,dynamic">
	<javac srcdir="${src}/generated/org/omg"
               destdir="${classdir}"
	       includes="CosTrading/**,CosTradingDynamic/**,CosTradingRepos/**"
        />
   </target>

   <target name="basic">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags}   ${include}/omg/CosTrading.idl"/>
	</java>
   </target>

   <target name="repository">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags}   ${include}/omg/CosTradingRepos.idl"/>
	</java>
   </target>

   <target name="dynamic">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags}   ${include}/omg/CosTradingDynamic.idl"/>
	</java>
   </target>

   <!--                           -->
   <!--     Notification service  -->
   <!--                           -->

   <target name="notification" depends="init,notif,typed">
	<javac srcdir="${src}/generated/org/omg"
               destdir="${classdir}"
	       includes="CosNotification/*.java,CosNotify**/*.java,CosTyped*/**/*.java"
        />
   </target>

   <target name="notif">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CosNotification.idl ${include}/omg/CosNotifyChannelAdmin.idl"/>
	</java>
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CosNotifyComm.idl ${include}/omg/CosNotifyFilter.idl"/>
	</java>
   </target>

   <target name="typed">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CosTypedNotifyChannelAdmin.idl"/>
	</java>
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CosTypedNotifyComm.idl"/>
	</java>
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CosTypedEventChannelAdmin.idl"/>
	</java>
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/CosTypedEventComm.idl"/>
	</java>
   </target>


   <!--                      -->
   <!--    security service  -->
   <!--                      -->

   <target name="security" 
	   depends="init,time,secbasic,level1,level2,secadmin,replaceable,ssliop">
	<javac srcdir="${src}/generated/org/omg"
               destdir="${classdir}"
	       includes="TimeBase/**,Security/**,Security**/**,SSLIOP/**"
        />
   </target>

   <target name="secbasic" depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/Security.idl"/>
	</java>
   </target>

   <target name="time" depends="init">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/TimeBase.idl"/>
	</java>
   </target>

   <target name="level1">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/SecurityLevel1.idl"/>
	</java>
   </target>

   <target name="level2">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/SecurityLevel2.idl"/>
	</java>
   </target>

   <target name="secadmin">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/SecurityAdmin.idl"/>
	</java>
   </target>

   <target name="replaceable">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/SecurityReplaceable.idl"/>
	</java>
   </target>

   <target name="ssliop">
	<java classname="org.jacorb.idl.parser" classpath="${classpath}" fork="yes">
	      <arg line="${idlflags} ${include}/omg/SSLIOP.idl"/>
	</java>
   </target>

   <!-- ==================================================== -->
   <!--                   JacORB implementation              -->
   <!-- ==================================================== -->

   <target name="jacorb" depends="init">
        <ant antfile="${src}/org/jacorb/build.xml" dir="${basedir}"/>
   </target>

   <!-- ==================================================== -->
   <!--                  Libraries                           -->
   <!-- ==================================================== -->


   <target name="libs" depends="init,jar,jaco"/>

   <target name="jar" depends="init">
      <delete file="${lib}/jacorb.jar"/>
       <jar jarfile="${lib}/jacorb.jar" 
	    basedir="${classdir}"
	    includes="jacorb/**,org/omg/**, HTTPClient/**"
	    excludes="jacorb/idl/**"
	    />	    
   </target>

   <target name="jaco" depends="init, jaco1, jaco2"/>

   <target name="jaco1" unless="java2">
            <delete file="bin/jaco" />
            <delete file="bin/jaco.bat" />
            <copy file="bin/jacotemplate1" tofile="bin/jaco" />
            <copy file="bin/jacotemplate1.bat" tofile="bin/jaco.bat" />
           <replace file="bin/jaco.bat" token="@@@" value="${basedir}\lib\jacorb.jar;${java.home}\lib\classes.zip"/>
           <replace file="bin/jaco" token="@@@" value="${basedir}/lib/jacorb.jar:${java.home}\lib\classes.zip" />
           <chmod file="bin/jaco" perm="ugo+rx"/>
   </target> 
 
   <target name="jaco2" if="java2">
            <delete file="bin/jaco" />
            <delete file="bin/jaco.bat" />
            <copy file="bin/jacotemplate" tofile="bin/jaco" />
            <copy file="bin/jacotemplate.bat" tofile="bin/jaco.bat" />
           <replace file="bin/jaco.bat" token="@@@" value="${basedir}\lib\jacorb.jar;${java.home}\lib\rt.jar"/>
           <replace file="bin/jaco" token="@@@"
            value="${basedir}/lib/jacorb.jar:${java.home}/lib/rt.jar" />
           <chmod file="bin/jaco" perm="ugo+rx"/>
   </target> 

   <!-- ==================================================== -->
   <!--                   clean up                           -->
   <!-- ==================================================== -->


   <target name="clean" depends="init">
      <delete>
           <fileset dir="${classdir}" includes="**"/>  
      </delete>
      <delete>
           <fileset dir="${src}/generated" includes="**"/>  
      </delete>
   </target>

   <!-- ==================================================== -->
   <!--                  API documentation                   -->
   <!-- ==================================================== -->


   <target name="doc" depends="init">
           <javadoc destdir="${basedir}/doc/api"
                    packagenames="jacorb.*">
                    <sourcepath> 
                                 <pathelement path="${src}" />
                                 <pathelement path="${src}/generated" />
                    </sourcepath> 
           </javadoc>
           <javadoc destdir="${basedir}/doc/api"
                    packagenames="org.omg.*">
                    <sourcepath> 
                                 <pathelement path="${src}" />
                                 <pathelement path="${src}/generated" />
                    </sourcepath> 
           </javadoc>
   </target>

</project>

