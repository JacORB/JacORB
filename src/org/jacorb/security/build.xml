<?xml version="1.0"?>

<!DOCTYPE project [ <!ENTITY common SYSTEM "file:../../../../etc/common.xml"> ]>

<project name="security" default="all" basedir="../../../..">

  <!-- ==================================================== -->
  <!--             security build file                         -->
  <!-- $Id$ -->
  <!-- ==================================================== -->

   &common;


   <target name="check-iaik">
      <available classname="iaik.x509.X509Certificate" property="iaik.present" />
   </target>


<!--   <target name="all" depends="init,leveltwo,aux,ssl,sas"/> -->
   <target name="all" depends="init,leveltwo,aux,gui,ssl"/>


   <target name="ssl">
           <ant antfile="${src}/org/jacorb/security/ssl/build.xml" dir="${basedir}"/>
   </target>


   <target name="sas">
           <ant antfile="${src}/org/jacorb/security/sas/build.xml" dir="${basedir}"/>
   </target>


   <target name="leveltwo">
      <antcall target="jacorb-javac">
         <param name="javac-includes" value="org/jacorb/security/level2/*.java"/>
         <param name="javac-excludes" value="org/jacorb/security/level2/PrincipalAuthenticatorImpl.java"/>
      </antcall>
   </target>


   <!-- principal_authenticator & util classes -->
   <target name="aux" depends="check-iaik" if="iaik.present">
      <antcall target="jacorb-javac">
          <param name="javac-includes" value="org/jacorb/security/level2/PrincipalAuthenticatorImpl.java"/>
      </antcall>
   </target>

    <target name="gui" depends="check-iaik" if="iaik.present" unless="cdc-build">
        <antcall target="jacorb-javac">
            <param name="javac-includes" value="org/jacorb/security/util/*.java"/>
        </antcall>
    </target>

   <target name="clean" depends="init">
      <delete dir="${classdir}/org/jacorb/security"/>
   </target>
</project>
